**ç›®å½•**

[å‰è¨€](#%E5%89%8D%E8%A8%80)

[1.Â  æŸ¥è¯¢" 01 "è¯¾ç¨‹æ¯”" 02 "è¯¾ç¨‹æˆç»©é«˜çš„å­¦ç”Ÿçš„ä¿¡æ¯åŠè¯¾ç¨‹åˆ†æ•°](#t0)

[2.Â  æŸ¥è¯¢åŒæ—¶å­˜åœ¨" 01 "è¯¾ç¨‹å’Œ" 02 "è¯¾ç¨‹çš„æƒ…å†µ](#t1)

[3.Â  æŸ¥è¯¢å­˜åœ¨" 01 "è¯¾ç¨‹ä½†å¯èƒ½ä¸å­˜åœ¨" 02 "è¯¾ç¨‹çš„æƒ…å†µ(ä¸å­˜åœ¨æ—¶æ˜¾ç¤ºä¸º null )](#t2)

[4.Â  æŸ¥è¯¢ä¸å­˜åœ¨" 01 "è¯¾ç¨‹ä½†å­˜åœ¨" 02 "è¯¾ç¨‹çš„æƒ…å†µ](#t3)

[5.Â  æŸ¥è¯¢å¹³å‡æˆç»©å¤§äºç­‰äº 60 åˆ†çš„åŒå­¦çš„å­¦ç”Ÿç¼–å·å’Œå­¦ç”Ÿå§“åå’Œå¹³å‡æˆç»©](#t4)

[6.Â  æŸ¥è¯¢åœ¨ t_mysql_score è¡¨å­˜åœ¨æˆç»©çš„å­¦ç”Ÿä¿¡æ¯](#t5)

[7.Â  æŸ¥è¯¢æ‰€æœ‰åŒå­¦çš„å­¦ç”Ÿç¼–å·ã€å­¦ç”Ÿå§“åã€é€‰è¯¾æ€»æ•°ã€æ‰€æœ‰è¯¾ç¨‹çš„æ€»æˆç»©(æ²¡æˆç»©çš„æ˜¾ç¤ºä¸º null )](#t6)

[8.Â  æŸ¥è¯¢ã€Œæã€å§“è€å¸ˆçš„æ•°é‡](#t7)

[9.Â  æŸ¥è¯¢å­¦è¿‡ã€Œå¼ ä¸‰ã€è€å¸ˆæˆè¯¾çš„åŒå­¦çš„ä¿¡æ¯](#t8)

[10.Â  æŸ¥è¯¢æ²¡æœ‰å­¦å…¨æ‰€æœ‰è¯¾ç¨‹çš„åŒå­¦çš„ä¿¡æ¯](#t9)

[11.Â  æŸ¥è¯¢æ²¡å­¦è¿‡"å¼ ä¸‰"è€å¸ˆè®²æˆçš„ä»»ä¸€é—¨è¯¾ç¨‹çš„å­¦ç”Ÿå§“å](#t10)

[12.Â  æŸ¥è¯¢ä¸¤é—¨åŠå…¶ä»¥ä¸Šä¸åŠæ ¼è¯¾ç¨‹çš„åŒå­¦çš„å­¦å·ï¼Œå§“ååŠå…¶å¹³å‡æˆç»©](#t11)

[13.Â  æ£€ç´¢" 01 "è¯¾ç¨‹åˆ†æ•°å°äº 60ï¼ŒæŒ‰åˆ†æ•°é™åºæ’åˆ—çš„å­¦ç”Ÿä¿¡æ¯](#t12)

[14.Â  æŒ‰å¹³å‡æˆç»©ä»é«˜åˆ°ä½æ˜¾ç¤ºæ‰€æœ‰å­¦ç”Ÿçš„æ‰€æœ‰è¯¾ç¨‹çš„æˆç»©ä»¥åŠå¹³å‡æˆç»©](#t13)

[15.Â  æŸ¥è¯¢å„ç§‘æˆç»©æœ€é«˜åˆ†ã€æœ€ä½åˆ†å’Œå¹³å‡åˆ†ï¼š-- ä»¥å¦‚ä¸‹å½¢å¼æ˜¾ç¤ºï¼šè¯¾ç¨‹ IDï¼Œè¯¾ç¨‹ nameï¼Œæœ€é«˜åˆ†ï¼Œæœ€ä½åˆ†ï¼Œå¹³å‡åˆ†ï¼ŒåŠæ ¼ç‡ï¼Œä¸­ç­‰ç‡ï¼Œä¼˜è‰¯ç‡ï¼Œä¼˜ç§€ç‡ã€‚(åŠæ ¼ä¸º>=60ï¼Œä¸­ç­‰ä¸ºï¼š70-80ï¼Œä¼˜è‰¯ä¸ºï¼š80-90ï¼Œä¼˜ç§€ä¸ºï¼š>=90)-- è¦æ±‚è¾“å‡ºè¯¾ç¨‹å·å’Œé€‰ä¿®äººæ•°ï¼ŒæŸ¥è¯¢ç»“æœæŒ‰äººæ•°é™åºæ’åˆ—ï¼Œè‹¥äººæ•°ç›¸åŒï¼ŒæŒ‰è¯¾ç¨‹å·å‡åºæ’åˆ—](#t14)

[CASE å‡½æ•°çš„è¯¦è§£](#t15)

[1\. ç®€å• CASE è¡¨è¾¾å¼ï¼š](#t16)

[2\. æœç´¢ CASE è¡¨è¾¾å¼ï¼š](#t17)

[if å‡½æ•°è¯¦è§£](#t18)

---

## å‰è¨€

æ•°æ®åº“çš„è€ƒå¯Ÿåœ¨é¢è¯•æ—¶å¯æ˜¯ååˆ†å¸¸è§çš„ï¼ŒMySQL ä½œä¸ºä¸€ç§å¸¸ç”¨çš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œå¯¹äºå®ƒçš„ä»‹ç»åœ¨é¢è¯•æ—¶å¯æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œä¸‹é¢å°±æ˜¯ä¸€äº›å¸¸è§ç¬”è¯•é¢˜çš„æ¨¡æ‹Ÿï¼Œå¸Œæœ›å¯ä»¥å¸®åŠ©åˆ°ä½  ğŸ™‚ğŸ™‚

æ‰€ç”¨åˆ°çš„è¡¨å¦‚ä¸‹ï¼š

**å­¦ç”Ÿè¡¨ï¼ˆt_mysql_studentï¼‰**

æœ‰å­¦ç”Ÿ IDï¼ˆsidï¼‰ï¼Œå­¦ç”Ÿå§“åï¼ˆsnameï¼‰ï¼Œå­¦ç”Ÿå¹´é¾„ï¼ˆsageï¼‰ï¼Œå­¦ç”Ÿæ€§åˆ«ï¼ˆssexï¼‰

![](https://i-blog.csdnimg.cn/blog_migrate/af2b218c917ce64ce29285b9b7233d02.png)

**æ•™å¸ˆè¡¨ï¼ˆt_mysql_teacherï¼‰**

æ•™å¸ˆç¼–å·ï¼ˆtidï¼‰ï¼Œæ•™å¸ˆå§“åï¼ˆtnameï¼‰

![](https://i-blog.csdnimg.cn/blog_migrate/70f9fe77bfaca363435e47f57e0a8cc1.png)

**è¯¾ç¨‹è¡¨ï¼ˆt_mysql_courseï¼‰**

è¯¾ç¨‹ç¼–å·ï¼ˆcidï¼‰ï¼Œè¯¾ç¨‹åç§°ï¼ˆcnameï¼‰ï¼Œæ•™å¸ˆç¼–å·ï¼ˆtid å¤–é”®ï¼‰

![](https://i-blog.csdnimg.cn/blog_migrate/b61acb67368851c0475fec04b9a0e19b.png)

**æˆç»©è¡¨ï¼ˆt_mysql_scoreï¼‰**

å­¦ç”Ÿç¼–å·ï¼ˆsid å¤–é”®ï¼‰ï¼Œè¯¾ç¨‹ç¼–å·ï¼ˆcid å¤–é”®ï¼‰ï¼Œå­¦ç”Ÿæˆç»©ï¼ˆscoreï¼‰

![](https://i-blog.csdnimg.cn/blog_migrate/d281668c002e24dacdb283e2fec1cbc1.png)

## Â 1.Â  æŸ¥è¯¢" 01 "è¯¾ç¨‹æ¯”" 02 "è¯¾ç¨‹æˆç»©é«˜çš„å­¦ç”Ÿçš„ä¿¡æ¯åŠè¯¾ç¨‹åˆ†æ•°

```sql
select s.*,t1.score 01è¯¾ç¨‹åˆ†æ•°,t2.score 02è¯¾ç¨‹åˆ†æ•° from  (select *from t_mysql_score where cid='01')t1,(select *from t_mysql_score where cid='02')t2,t_mysql_student swhere s.sid=t1.sid and s.sid=t2.sidand t1.score>t2.score
```

## 2.Â  æŸ¥è¯¢åŒæ—¶å­˜åœ¨" 01 "è¯¾ç¨‹å’Œ" 02 "è¯¾ç¨‹çš„æƒ…å†µ

```sql
select s.*,t1.score 01è¯¾ç¨‹åˆ†æ•°,t2.score 02è¯¾ç¨‹åˆ†æ•° from (select * from t_mysql_score where cid='01')t1,(select * from t_mysql_score where cid='02')t2,t_mysql_student swhere s.sid=t1.sid and s.sid=t2.sid
```

## 3.Â  æŸ¥è¯¢å­˜åœ¨" 01 "è¯¾ç¨‹ä½†å¯èƒ½ä¸å­˜åœ¨" 02 "è¯¾ç¨‹çš„æƒ…å†µ(ä¸å­˜åœ¨æ—¶æ˜¾ç¤ºä¸º null )

```sql
select t1.*,t2.score 02è¯¾ç¨‹ from (select *from t_mysql_score where cid='01')t1 left join (select *from t_mysql_score where cid='02')t2 ont1.sid=t2.sid
```

## 4.Â  æŸ¥è¯¢ä¸å­˜åœ¨" 01 "è¯¾ç¨‹ä½†å­˜åœ¨" 02 "è¯¾ç¨‹çš„æƒ…å†µ

```sql
select *from t_mysql_score s where s.sid not in(select sid from t_mysql_score where cid='01')and cid='02'
```

## 5.Â  æŸ¥è¯¢å¹³å‡æˆç»©å¤§äºç­‰äº 60 åˆ†çš„åŒå­¦çš„å­¦ç”Ÿç¼–å·å’Œå­¦ç”Ÿå§“åå’Œå¹³å‡æˆç»©

```sql
select s.sid,s.sname,ROUND(AVG(sc.score)) å¹³å‡æˆç»©fromt_mysql_student s,t_mysql_score scwhere s.sid=sc.sidGROUP BYs.sid,s.snameHAVINGå¹³å‡æˆç»©>60
```

## 6.Â  æŸ¥è¯¢åœ¨ t_mysql_score è¡¨å­˜åœ¨æˆç»©çš„å­¦ç”Ÿä¿¡æ¯

```sql
select *from t_mysql_student where sid in (select sid from t_mysql_score GROUP BY sid )
```

## 7.Â  æŸ¥è¯¢æ‰€æœ‰åŒå­¦çš„å­¦ç”Ÿç¼–å·ã€å­¦ç”Ÿå§“åã€é€‰è¯¾æ€»æ•°ã€æ‰€æœ‰è¯¾ç¨‹çš„æ€»æˆç»©(æ²¡æˆç»©çš„æ˜¾ç¤ºä¸º null )

```sql
select s.sid,s.sname,count(sc.cid),sum(sc.score)fromt_mysql_student s ,t_mysql_score scwhere s.sid=sc.sidGROUP BYs.sid,s.sname
```

## 8.Â  æŸ¥è¯¢ã€Œæã€å§“è€å¸ˆçš„æ•°é‡

```sql
select count(*) from t_mysql_teacher where tname like 'æ%'
```

## 9.Â  æŸ¥è¯¢å­¦è¿‡ã€Œå¼ ä¸‰ã€è€å¸ˆæˆè¯¾çš„åŒå­¦çš„ä¿¡æ¯

```sql
select s.*,t.tnamefromt_mysql_student s,t_mysql_teacher t,t_mysql_course c,t_mysql_score scwhere s.sid=sc.sid and t.tid=c.tid and c.cid=sc.cidand tname='å¼ ä¸‰'
```

## 10.Â  æŸ¥è¯¢æ²¡æœ‰å­¦å…¨æ‰€æœ‰è¯¾ç¨‹çš„åŒå­¦çš„ä¿¡æ¯

```sql
select s.sid,s.sname,count(sc.cid) è¯¾ç¨‹æ€»æ•°fromt_mysql_student s,t_mysql_score scwhere s.sid=sc.sidGROUP BYs.sid,s.snameHAVINGè¯¾ç¨‹æ€»æ•°<(select count(1) from t_mysql_course)
```

## 11.Â  æŸ¥è¯¢æ²¡å­¦è¿‡"å¼ ä¸‰"è€å¸ˆè®²æˆçš„ä»»ä¸€é—¨è¯¾ç¨‹çš„å­¦ç”Ÿå§“å

```sql
select s.* from t_mysql_student s where s.sid not in (selectsc.sidfromt_mysql_teacher t,t_mysql_course c,t_mysql_score scwhere t.tid=c.tid and c.cid=sc.cidand t.tname='å¼ ä¸‰'GROUP BYsc.sid)
```

## 12.Â  æŸ¥è¯¢ä¸¤é—¨åŠå…¶ä»¥ä¸Šä¸åŠæ ¼è¯¾ç¨‹çš„åŒå­¦çš„å­¦å·ï¼Œå§“ååŠå…¶å¹³å‡æˆç»©

```sql
SELECTs.sid,s.sname,ROUND(AVG(sc.score)) å¹³å‡æˆç»©,COUNT(sc.cid) è¯¾ç¨‹æ€»æ•°FROMt_mysql_student s,t_mysql_score scWHEREs.sid=sc.sid and sc.score<60GROUP BYs.sid,s.snameHAVINGè¯¾ç¨‹æ€»æ•°>=2
```

## 13.Â  æ£€ç´¢" 01 "è¯¾ç¨‹åˆ†æ•°å°äº 60ï¼ŒæŒ‰åˆ†æ•°é™åºæ’åˆ—çš„å­¦ç”Ÿä¿¡æ¯

```sql
SELECTs.*FROMt_mysql_score sc,t_mysql_student sWHEREsc.sid=s.sid and sc.score<60 and cid='01'ORDER BY sc.score DESC
```

## 14.Â  æŒ‰å¹³å‡æˆç»©ä»é«˜åˆ°ä½æ˜¾ç¤ºæ‰€æœ‰å­¦ç”Ÿçš„æ‰€æœ‰è¯¾ç¨‹çš„æˆç»©ä»¥åŠå¹³å‡æˆç»©

```sql
SELECTs.sid,s.sname,round(AVG(sc.score),2) å¹³å‡æˆç»© ,max(case when sc.cid='01' then sc.score end)è¯­æ–‡,max(case when sc.cid='02' then sc.score end)æ•°å­¦,max(case when sc.cid='03' then sc.score end)è‹±è¯­FROMt_mysql_score sc,t_mysql_student s,t_mysql_course cWHERE sc.sid=s.sid and sc.cid=c.cidGROUP BYs.sid,s.snameORDER BY å¹³å‡æˆç»© desc
```

## 15.Â  æŸ¥è¯¢å„ç§‘æˆç»©æœ€é«˜åˆ†ã€æœ€ä½åˆ†å’Œå¹³å‡åˆ†ï¼š

\-- ä»¥å¦‚ä¸‹å½¢å¼æ˜¾ç¤ºï¼šè¯¾ç¨‹ IDï¼Œè¯¾ç¨‹ nameï¼Œæœ€é«˜åˆ†ï¼Œæœ€ä½åˆ†ï¼Œå¹³å‡åˆ†ï¼ŒåŠæ ¼ç‡ï¼Œä¸­ç­‰ç‡ï¼Œä¼˜è‰¯ç‡ï¼Œä¼˜ç§€ç‡ã€‚(åŠæ ¼ä¸º>=60ï¼Œä¸­ç­‰ä¸ºï¼š70-80ï¼Œä¼˜è‰¯ä¸ºï¼š80-90ï¼Œä¼˜ç§€ä¸ºï¼š>=90)  
\-- è¦æ±‚è¾“å‡ºè¯¾ç¨‹å·å’Œé€‰ä¿®äººæ•°ï¼ŒæŸ¥è¯¢ç»“æœæŒ‰äººæ•°é™åºæ’åˆ—ï¼Œè‹¥äººæ•°ç›¸åŒï¼ŒæŒ‰è¯¾ç¨‹å·å‡åºæ’åˆ—

```sql
SELECTc.cid,c.cname,max(sc.score)æœ€é«˜åˆ†,min(sc.score)æœ€ä½åˆ†,ROUND(AVG(sc.score))å¹³å‡åˆ†,count(sc.score)é€‰ä¿®äººæ•°,CONCAT(ROUND(sum(if(sc.score>=60,1,0))/count(sc.score)*100),'%')åŠæ ¼ç‡,CONCAT(ROUND(sum(if(sc.score>=70 and sc.score<80,1,0))/count(sc.score)*100),'%')ä¸­ç­‰ç‡,CONCAT(ROUND(sum(if(sc.score>=80 and sc.score<90,1,0))/count(sc.score)*100),'%')ä¼˜è‰¯ç‡,CONCAT(ROUND(sum(if(sc.score>=90,1,0))/count(sc.score)*100),'%')ä¼˜ç§€ç‡FROMt_mysql_score sc,t_mysql_course c,t_mysql_student sWHEREsc.sid=s.sid and sc.cid=c.cidGROUP BYc.cid,c.cnameORDER BYé€‰ä¿®äººæ•° desc,c.cid
```

### CASE å‡½æ•°çš„è¯¦è§£

åœ¨ MySQL æ•°æ®åº“ä¸­ï¼ŒCASE å‡½æ•°æ˜¯ä¸€ç§æ¡ä»¶è¡¨è¾¾å¼å‡½æ•°ï¼Œå®ƒå…è®¸æ ¹æ®æ¡ä»¶çš„ç»“æœè¿”å›ä¸åŒçš„å€¼ã€‚CASE å‡½æ•°æœ‰ä¸¤ç§å½¢å¼ï¼šç®€å• CASE è¡¨è¾¾å¼å’Œæœç´¢ CASE è¡¨è¾¾å¼ã€‚

#### 1\. ç®€å• CASE è¡¨è¾¾å¼ï¼š

ç®€å• CASE è¡¨è¾¾å¼ç”¨äºå¯¹å•ä¸ªè¡¨è¾¾å¼è¿›è¡Œå¤šä¸ªæ¡ä»¶çš„æ¯”è¾ƒï¼Œè¯­æ³•å¦‚ä¸‹ï¼š

```sql
CASE expression    WHEN value1 THEN result1    WHEN value2 THEN result2    ...    ELSE resultEND
```

expression æ˜¯éœ€è¦è¿›è¡Œæ¯”è¾ƒçš„è¡¨è¾¾å¼ï¼ˆæ˜¯å¯ä»¥çœç•¥çš„ï¼‰ï¼Œvalue1ã€value2 ç­‰æ˜¯å¾…æ¯”è¾ƒçš„å€¼ï¼Œresult1ã€result2 ç­‰æ˜¯æ»¡è¶³æ¡ä»¶æ—¶è¿”å›çš„ç»“æœï¼ŒELSE å­å¥ç”¨äºæŒ‡å®šå½“æ²¡æœ‰æ¡ä»¶åŒ¹é…æ—¶çš„é»˜è®¤ç»“æœï¼ˆä¹Ÿæ˜¯å¯ä»¥çœç•¥çš„ï¼‰ã€‚

**ç”¨ä¸Šé¢çš„ç¬¬ 14 é¢˜ä¸¾ä¾‹**

> **case when sc.cid='01' then sc.score end**
>
> - **case åé¢çš„è¡¨è¾¾å¼å’Œ else åé¢çš„å­å¥éƒ½è¿›è¡Œäº†çœç•¥**
> - **sc.cid='01'æ˜¯éœ€è¦è¢«æ¯”è¾ƒçš„å€¼ï¼Œå½“å®ƒæˆç«‹æ—¶ï¼Œä¾¿è¾“å‡º sc.score**

#### 2\. æœç´¢ CASE è¡¨è¾¾å¼ï¼š

æœç´¢ CASE è¡¨è¾¾å¼ç”¨äºæ ¹æ®å¤šä¸ªæ¡ä»¶è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶è¿”å›æ»¡è¶³æ¡ä»¶çš„ç¬¬ä¸€ä¸ªç»“æœã€‚å®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š

```sql
CASE    WHEN condition1 THEN result1    WHEN condition2 THEN result2    ...    ELSE resultEND
```

condition1ã€condition2 ç­‰æ˜¯å¾…æ¯”è¾ƒçš„æ¡ä»¶è¡¨è¾¾å¼ï¼Œresult1ã€result2 ç­‰æ˜¯æ»¡è¶³æ¡ä»¶æ—¶è¿”å›çš„ç»“æœï¼ŒELSE å­å¥ç”¨äºæŒ‡å®šå½“æ²¡æœ‰æ¡ä»¶åŒ¹é…æ—¶çš„é»˜è®¤ç»“æœã€‚

> æ€»ç»“è€Œè¨€ï¼ŒCASE å‡½æ•°åœ¨ MySQL æ•°æ®åº“ä¸­ç”¨äºæ ¹æ®æ¡ä»¶è¿”å›ä¸åŒçš„å€¼ã€‚ç®€å• CASE è¡¨è¾¾å¼é€‚ç”¨äºå¯¹å•ä¸ªè¡¨è¾¾å¼è¿›è¡Œå¤šä¸ªæ¡ä»¶æ¯”è¾ƒï¼Œè€Œæœç´¢ CASE è¡¨è¾¾å¼é€‚ç”¨äºæ ¹æ®å¤šä¸ªæ¡ä»¶è¿›è¡Œæ¯”è¾ƒã€‚å®ƒä»¬å¯ä»¥åœ¨ SELECT è¯­å¥ä¸­ä½¿ç”¨ï¼Œå¹¶ä¸”å¯ä»¥ä¸å…¶ä»–å‡½æ•°å’Œæ¡ä»¶è¡¨è¾¾å¼ç»„åˆä½¿ç”¨ã€‚

### if å‡½æ•°è¯¦è§£

MySQL æ•°æ®åº“ä¸­çš„ IF å‡½æ•°æ˜¯ä¸€ä¸ªæ¡ä»¶è¡¨è¾¾å¼å‡½æ•°ï¼Œå®ƒå…è®¸æ ¹æ®æ¡ä»¶çš„ç»“æœè¿”å›ä¸åŒçš„å€¼ã€‚IF å‡½æ•°çš„è¯­æ³•å¦‚ä¸‹ï¼š

```sql
IF(condition, value_if_true, value_if_false)
```

condition æ˜¯ä¸€ä¸ªå¸ƒå°”è¡¨è¾¾å¼æˆ–æ¡ä»¶ï¼Œvalue_if_true æ˜¯å½“æ¡ä»¶ä¸ºçœŸæ—¶è¿”å›çš„å€¼ï¼Œvalue_if_false æ˜¯å½“æ¡ä»¶ä¸ºå‡æ—¶è¿”å›çš„å€¼ã€‚

**ç”¨ä¸Šé¢çš„ç¬¬ 15 é¢˜ä¸¾ä¾‹**

> **if(sc.score>=60,1,0)**
>
> **å¦‚æœ sc.score å¤§äº 60 åˆ†ï¼Œå°±è¾“å‡º 1ï¼Œå¦åˆ™å°±è¾“å‡º 0**

> æ€»ç»“è€Œè¨€ï¼ŒIF å‡½æ•°åœ¨ MySQL æ•°æ®åº“ä¸­ç”¨äºæ ¹æ®æ¡ä»¶è¿”å›ä¸åŒçš„å€¼ï¼Œå®ƒå¯ä»¥åœ¨ SELECTã€INSERTã€UPDATE ç­‰è¯­å¥ä¸­ä½¿ç”¨ï¼Œå¹¶ä¸”å¯ä»¥ä¸å…¶ä»–å‡½æ•°å’Œè¿ç®—ç¬¦ç»„åˆä½¿ç”¨ã€‚

ä¸€èµ·è¿›æ­¥å§ï¼ï¼ï¼âœŒâœŒâœŒ
